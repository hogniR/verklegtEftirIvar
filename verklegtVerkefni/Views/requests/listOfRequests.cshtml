@model IEnumerable<verklegtVerkefni.Models.Requests>

@{
    ViewBag.Title = "listOfRequests";
}
<!--Listi af beiðnum-->
<!DOCTYPE html>
<html lang="is">
<head>
    <title>textit</title>
    <link rel="stylesheet" type="text/css" href="~/Content/main.css" media="screen, projection" />
    <script src="JavaScript.js" type="text/javascript"></script>
</head>
<body>
        <div class="middleRequest">
             <h2>Beiðnir</h2>
                <table id="requestTable">
                    <thead>
                        <tr>
                            <th>Beidnir</th>
                            <th>Likes</th>
                            <th>Dagsetning</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var request in Model)
                        {
                            <tr>
                                <td>
                                    <div id="request">@Html.ActionLink(request.name, "viewRequest", new { id = request.id })</div>
                                </td>
                                <td id="totalLikes_@request.id">
                                    @request.likes<p id="like_@request.id"><a href="#" onclick="addLike(@request.id)" id="likeButton_@request.id">Like</a></p>
                                </td>
                                <td>
                                    @request.dateOfPost
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            <p class="newRequestLink">
                @Html.ActionLink("Senda inn beiðni", "newRequest", "requests")
            </p>
            <script type="text/javascript">
                function addLike(id) {
                    $.ajax({
                        type: "POST",
                        url: "addLike",
                        data: { 'id': id },
                        success: function (data) {
                            $('#likeButton_' + id).hide();
                            $('#totalLikes_' + id).replaceWith(data);
                        }
                    })
                }
            </script>
            </div> <!--middle content lokast-->
</body>
</html>        